---
apiVersion: v1
kind: ConfigMap
metadata:
  name: homepage
  namespace: default
  labels:
    app.kubernetes.io/name: homepage
data:
  custom.css: |
    /* Background rotation layers */
    .bg-layer {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-size: cover;
      background-position: center;
      z-index: -1;
      transition: opacity 2s ease-in-out;
    }
    .bg-layer.active {
      opacity: 1;
    }
    .bg-layer.inactive {
      opacity: 0;
    }

    /* Glassmorphism service cards */
    #page_container .service {
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      background: rgba(15, 23, 42, 0.82) !important;
      border: 1px solid rgba(148, 163, 184, 0.2) !important;
      border-radius: 16px !important;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    #page_container .service:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(148, 163, 184, 0.2);
    }

    /* Glassmorphism widget cards */
    #page_container .widget {
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      background: rgba(15, 23, 42, 0.78) !important;
      border: 1px solid rgba(148, 163, 184, 0.15) !important;
      border-radius: 16px !important;
    }

    /* Information widgets (top bar) — blur to image, not colour */
    #information-widgets {
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      background: rgba(15, 23, 42, 0.35) !important;
      border: 1px solid rgba(148, 163, 184, 0.15) !important;
      border-radius: 16px !important;
      padding: 0.75rem 1.25rem !important;
      font-size: 0.9rem !important;
    }

    /* Search bar input — transparent, no background */
    #page_container input[type="text"],
    #page_container input[type="search"] {
      background: transparent !important;
      border: none !important;
      border-radius: 0 !important;
      color: #e2e8f0 !important;
      padding: 0.75rem 1rem !important;
    }
    #page_container input[type="text"]:focus,
    #page_container input[type="search"]:focus {
      border: none !important;
      box-shadow: none !important;
      outline: none !important;
    }

    /* Search widget container — glassmorphism pill */
    #page_container form,
    #page_container .search-wrapper,
    #page_container [class*="search"] {
      background: transparent !important;
    }
    #information-widgets form,
    #information-widgets [class*="search"] {
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      background: rgba(15, 23, 42, 0.45) !important;
      border: 1px solid rgba(148, 163, 184, 0.15) !important;
      border-radius: 16px !important;
      padding: 0.15rem 0.5rem !important;
    }

    /* Remove any blue focus rings globally */
    #page_container *:focus {
      outline-color: rgba(148, 163, 184, 0.3) !important;
    }

    /* Darken grey/muted icons */
    #page_container .service img,
    #page_container .service svg {
      filter: brightness(1.3) contrast(1.1);
    }
    #page_container .service .text-theme-500,
    #page_container .service .text-gray-500,
    #page_container .service [class*="text-theme"],
    #page_container .text-gray-400,
    #page_container .text-slate-400,
    #page_container .text-zinc-400 {
      color: #cbd5e1 !important;
    }

    /* Section headers */
    #page_container h2 {
      color: #e2e8f0 !important;
      font-weight: 600;
      letter-spacing: 0.025em;
    }

    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }
    ::-webkit-scrollbar-track {
      background: rgba(15, 23, 42, 0.3);
    }
    ::-webkit-scrollbar-thumb {
      background: rgba(148, 163, 184, 0.3);
      border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: rgba(148, 163, 184, 0.5);
    }
  custom.js: |
    // Rotating nature backgrounds with crossfade
    (function () {
      const layer1 = document.createElement("div");
      const layer2 = document.createElement("div");
      layer1.className = "bg-layer active";
      layer2.className = "bg-layer inactive";
      document.body.prepend(layer2);
      document.body.prepend(layer1);

      let current = layer1;
      let next = layer2;

      function loadImage(url) {
        return new Promise((resolve, reject) => {
          const img = new Image();
          img.onload = () => resolve(url);
          img.onerror = reject;
          img.src = url;
        });
      }

      async function swap() {
        try {
          const url = "https://picsum.photos/2560/1440?random=" + Date.now();
          const loaded = await loadImage(url);
          next.style.backgroundImage = "url(" + loaded + ")";
          next.className = "bg-layer active";
          current.className = "bg-layer inactive";
          const temp = current;
          current = next;
          next = temp;
        } catch (e) {
          // silently retry next cycle
        }
      }

      // Load initial background
      swap();
      // Rotate every 30 seconds
      setInterval(swap, 30000);
    })();
  docker.yaml: ""
  proxmox.yaml: |
    # pve:
    #   url: https://proxmox.host.or.ip:8006
    #   token: username@pam!Token ID
    #   secret: secret
  kubernetes.yaml: |
    mode: disabled
  settings.yaml: |
    title: Home
    theme: dark
    color: slate
    headerStyle: clean
    statusStyle: dot
    cardBlur: md
    background:
      image: https://picsum.photos/2560/1440?random=1
      brightness: 20
      saturate: 40
      opacity: 40
    layout:
      Infrastructure:
        style: row
        columns: 3
        icon: mdi-server-network
      Network:
        style: row
        columns: 2
        icon: mdi-lan
      Social:
        style: row
        columns: 4
        icon: mdi-account-group
      Base:
        style: row
        columns: 3
        icon: mdi-apps
      Media:
        style: row
        columns: 4
        icon: mdi-filmstrip
      AI:
        style: row
        columns: 2
        icon: mdi-robot
      Monitoring:
        style: row
        columns: 2
        icon: mdi-chart-line
      Databases:
        style: row
        columns: 2
        icon: mdi-database
      Tools:
        style: row
        columns: 3
        icon: mdi-wrench
  widgets.yaml: |
    - greeting:
        text: Welcome Home
    - datetime:
        text_size: xl
        locale: en-GB
        dateStyle: long
        timeStyle: short
    - search:
        provider: google
        target: _blank
  bookmarks.yaml: |
    - Developer:
        - Github:
            - abbr: GH
              href: https://github.com/andrei-iacobb
  services.yaml: |
    - Infrastructure:
      - Home Assistant:
          icon: home-assistant.svg
          href: https://hass.iacob.co.uk
          description: Smart home
          siteMonitor: https://hass.iacob.co.uk
          widget:
            type: homeassistant
            url: https://hass.iacob.co.uk
            key: ${HOMEPAGE_HASS_KEY}
      - TrueNAS:
          icon: truenas.svg
          href: https://truenas.iacob.uk
          description: NAS storage
          siteMonitor: https://truenas.iacob.uk
          widget:
            type: truenas
            url: https://truenas.iacob.uk
            key: ${HOMEPAGE_TRUENAS_KEY}
            version: 1
            enablePools: false
      - Proxmox:
          icon: proxmox.svg
          href: https://proxmox.iacob.uk
          description: Virtualization
          siteMonitor: https://proxmox.iacob.uk
          widget:
            type: proxmox
            url: https://proxmox.iacob.uk
            username: ${HOMEPAGE_PROXMOX_USER}
            password: ${HOMEPAGE_PROXMOX_PASS}
      - iLO DL360:
          icon: mdi-server
          href: https://ilo1.iacob.uk
          description: HP DL360 G9 iLO
          siteMonitor: https://ilo1.iacob.uk
      - iLO DL380:
          icon: mdi-server
          href: https://ilo2.iacob.uk
          description: HP DL380 G9 iLO
          siteMonitor: https://ilo2.iacob.uk
      - Router:
          icon: mdi-router-wireless
          href: https://router.iacob.uk
          description: Network router
          siteMonitor: https://router.iacob.uk
      - HP Switch:
          icon: mdi-switch
          href: https://switch.iacob.uk
          description: Network switch
          siteMonitor: https://switch.iacob.uk
      - VolSync:
          icon: mdi-backup-restore
          href: https://volsync.readthedocs.io/
          description: PVC backup (Restic)
    - Network:
      - AdGuard Primary:
          icon: adguard-home
          href: https://dns1.iacob.uk
          description: Web filtering and DNS
          siteMonitor: https://dns1.iacob.uk
          widget:
            type: adguard
            url: https://dns1.iacob.uk
            username: ${HOMEPAGE_ADGUARD_1_USER}
            password: ${HOMEPAGE_ADGUARD_1_PASS}
      - AdGuard Secondary:
          icon: adguard-home
          href: https://dns2.iacob.uk
          description: DNS failover
          siteMonitor: https://dns2.iacob.uk
          widget:
            type: adguard
            url: https://dns2.iacob.uk
            username: ${HOMEPAGE_ADGUARD_2_USER}
            password: ${HOMEPAGE_ADGUARD_2_PASS}
    - Social:
      - GitHub:
          icon: si-github
          href: https://github.com/andrei-iacobb
          description: andrei-iacobb
      - Reddit:
          icon: si-reddit
          href: https://reddit.com
          description: Reddit
      - Outlook:
          icon: si-microsoftoutlook
          href: https://outlook.com
          description: Outlook mail
      - Gmail:
          icon: si-gmail
          href: https://mail.google.com
          description: Gmail
      - YouTube:
          icon: si-youtube
          href: https://youtube.com
          description: YouTube
      - LinkedIn:
          icon: si-linkedin
          href: https://linkedin.com
          description: LinkedIn
      - Discord:
          icon: si-discord
          href: https://discord.com
          description: Discord
      - X:
          icon: si-x
          href: https://x.com
          description: X (Twitter)
    - Base:
      - Gitea:
          icon: gitea.svg
          href: https://git.iacob.co.uk
          description: Git service
      - Notes:
          icon: outline.svg
          href: https://notes.iacob.uk
          description: Team wiki
      - n8n:
          icon: n8n.svg
          href: https://n8n.iacob.uk
          description: Workflow automation
      - Vaultwarden:
          icon: vaultwarden.svg
          href: https://vault.iacob.co.uk
          description: Password manager
      - Immich:
          icon: immich.svg
          href: https://photos.iacob.uk
          description: Photo backup
          widget:
            type: immich
            url: https://photos.iacob.uk
            key: ${HOMEPAGE_IMMICH_KEY}
            version: 2
      - Echo:
          icon: mdi-message-text
          href: https://echo.iacob.uk
          description: Echo service
      - Vikunja:
          icon: vikunja.svg
          href: https://tasks.iacob.uk
          description: Task management
      - Authentik:
          icon: authentik.svg
          href: https://authentik.iacob.uk
          description: Identity provider
      - Website:
          icon: mdi-web
          href: https://andrei.iacob.co.uk
          description: Personal website
    - Media:
      - Jellyfin:
          icon: jellyfin.svg
          href: https://jellyfin.iacob.uk
          description: Media server
          widget:
            type: jellyfin
            url: https://jellyfin.iacob.uk
            key: ${HOMEPAGE_JELLYFIN_KEY}
            enableBlocks: true
            enableNowPlaying: true
      - Plex:
          icon: plex.svg
          href: https://plex.iacob.uk
          description: Media server
          siteMonitor: https://plex.iacob.uk
      - Sonarr:
          icon: sonarr.svg
          href: https://sonarr.iacob.uk
          description: TV show management
          widget:
            type: sonarr
            url: https://sonarr.iacob.uk
            key: ${HOMEPAGE_SONARR_KEY}
      - Radarr:
          icon: radarr.svg
          href: https://radarr.iacob.uk
          description: Movie management
          widget:
            type: radarr
            url: https://radarr.iacob.uk
            key: ${HOMEPAGE_RADARR_KEY}
      - Lidarr:
          icon: lidarr.svg
          href: https://lidarr.iacob.uk
          description: Music management
          widget:
            type: lidarr
            url: https://lidarr.iacob.uk
            key: ${HOMEPAGE_LIDARR_KEY}
            enableQueue: true
      - Readarr:
          icon: readarr.svg
          href: https://readarr.iacob.uk
          description: Book management
          widget:
            type: readarr
            url: https://readarr.iacob.uk
            key: ${HOMEPAGE_READARR_KEY}
            enableQueue: true
      - Bazarr:
          icon: bazarr.svg
          href: https://bazarr.iacob.uk
          description: Subtitle management
          widget:
            type: bazarr
            url: https://bazarr.iacob.uk
            key: ${HOMEPAGE_BAZARR_KEY}
      - Prowlarr:
          icon: prowlarr.svg
          href: https://prowlarr.iacob.uk
          description: Indexer manager
          widget:
            type: prowlarr
            url: https://prowlarr.iacob.uk
            key: ${HOMEPAGE_PROWLARR_KEY}
      - Overseerr:
          icon: overseerr.svg
          href: https://overseerr.iacob.uk
          description: Media requests
          widget:
            type: overseerr
            url: https://overseerr.iacob.uk
            key: ${HOMEPAGE_OVERSEERR_KEY}
      - qBittorrent:
          icon: qbittorrent.svg
          href: https://qbittorrent.iacob.uk
          description: Torrent client
          widget:
            type: qbittorrent
            url: https://qbittorrent.iacob.uk
            username: ${HOMEPAGE_QBT_USER}
            password: ${HOMEPAGE_QBT_PASS}
            enableLeechProgress: true
      - SABnzbd:
          icon: sabnzbd.svg
          href: https://sabnzbd.iacob.uk
          description: Usenet client
          widget:
            type: sabnzbd
            url: https://sabnzbd.iacob.uk
            key: ${HOMEPAGE_SAB_KEY}
      - Calibre-Web:
          icon: calibre.svg
          href: https://calibre-web.iacob.uk
          description: eBook library
      - Lazylibrarian:
          icon: lazylibrarian.svg
          href: https://lazylibrarian.iacob.uk
          description: Book metadata
      - Tdarr:
          icon: tdarr.svg
          href: https://tdarr.iacob.uk
          description: Media transcoding
      - Recyclarr:
          icon: recyclarr.svg
          href: https://recyclarr.iacob.uk
          description: TRaSH guides sync
      - Huntarr:
          icon: huntarr.svg
          href: https://huntarr.iacob.uk
          description: Hunt missing media
      - Recommendarr:
          icon: recommendarr.svg
          href: https://recommendarr.iacob.uk
          description: Media recommendations
      - Pulsarr:
          icon: pulsarr.svg
          href: https://pulsarr.iacob.uk
          description: Watchlist sync
      - Agregarr:
          icon: agregarr.svg
          href: https://agregarr.iacob.uk
          description: Plex collections
      - Wizarr:
          icon: wizarr.svg
          href: https://wizarr.iacob.uk
          description: User invitations
      - Tautulli:
          icon: tautulli.svg
          href: https://tautulli.iacob.uk
          description: Plex analytics
    - AI:
      - Ollama:
          icon: ollama.svg
          href: https://ollama.iacob.uk
          description: LLM server
      - Open WebUI:
          icon: openwebui.svg
          href: https://openwebui.iacob.co.uk
          description: AI chat interface
    - Monitoring:
      - Grafana:
          icon: grafana.svg
          href: https://grafana.iacob.uk
          description: Dashboards
      - Prometheus:
          icon: prometheus.svg
          href: https://prometheus.iacob.uk
          description: Metrics
    - Databases:
      - pgAdmin:
          icon: pgadmin.svg
          href: https://pgadmin.iacob.uk
          description: PostgreSQL admin
      - MinIO:
          icon: minio.svg
          href: https://minio.iacob.uk
          description: Object storage console
    - Tools:
      - OpenSpeedTest:
          icon: mdi-speedometer
          href: https://openspeedtest.iacob.uk
          description: Network speed test
      - IT-Tools:
          icon: mdi-tools
          href: https://it-tools.iacob.uk
          description: Developer utilities
      - Paperless NGX:
          icon: paperless.svg
          href: https://paperless.iacob.uk
          description: Document management
      - Stirling PDF:
          icon: stirling-pdf.svg
          href: https://pdf.iacob.uk
          description: PDF toolkit
