---
# HP iLO 1 (DL360 G9)
apiVersion: v1
kind: Service
metadata:
  name: ilo1
  namespace: external-services
  labels:
    app.kubernetes.io/name: ilo1
spec:
  ports:
    - name: https
      port: 443
      protocol: TCP
      targetPort: 443
---
apiVersion: discovery.k8s.io/v1
kind: EndpointSlice
metadata:
  name: ilo1
  namespace: external-services
  labels:
    kubernetes.io/service-name: ilo1
addressType: IPv4
ports:
  - name: https
    appProtocol: https
    protocol: TCP
    port: 443
endpoints:
  - addresses:
      - "192.168.1.175"
---
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: ilo1
  namespace: external-services
spec:
  parentRefs:
    - name: envoy-internal
      namespace: network
      sectionName: https
  hostnames:
    - ilo1.iacob.uk
  rules:
    - backendRefs:
        - name: ilo1
          port: 443
---
# HP iLO 2 (DL380 G9)
apiVersion: v1
kind: Service
metadata:
  name: ilo2
  namespace: external-services
  labels:
    app.kubernetes.io/name: ilo2
spec:
  ports:
    - name: https
      port: 443
      protocol: TCP
      targetPort: 443
---
apiVersion: discovery.k8s.io/v1
kind: EndpointSlice
metadata:
  name: ilo2
  namespace: external-services
  labels:
    kubernetes.io/service-name: ilo2
addressType: IPv4
ports:
  - name: https
    appProtocol: https
    protocol: TCP
    port: 443
endpoints:
  - addresses:
      - "192.168.1.180"
---
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: ilo2
  namespace: external-services
spec:
  parentRefs:
    - name: envoy-internal
      namespace: network
      sectionName: https
  hostnames:
    - ilo2.iacob.uk
  rules:
    - backendRefs:
        - name: ilo2
          port: 443
